{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>

  <div class="blur_overlay"></div>

  <div class="vertical-waves">
    <div class="wave"></div>
    <div class="wave"></div>
    <div class="wave"></div>
  </div>

  <!-- –ù–∞–∑–∞–¥ –∏ —Å—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞ -->
  <div class="search_block">
    <a href="{% url 'index' %}"><div class="back_button"></div></a>
    <form class="searcher">
      <img class="search_icon" src="{% static 'images/search icon.png' %}">
      <input class="searcher_block" placeholder="–ü–æ–∏—Å–∫..." autocomplete="off">
    </form>
  </div>

  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div class="choosed_genre"><span class="red">A </span>SEARCH:</div>

  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
  <div class="content_body" style="margin-top: 20px; font-size: 24px; text-align: center;">
    –¢—É—Ç –±—É–¥—É—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const query = new URLSearchParams(window.location.search).get("query");
      console.log("üîç –ü–µ—Ä–µ—Ö–æ–¥ —Å –∑–∞–ø—Ä–æ—Å–æ–º:", query);

      // –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –≤ input
      document.querySelector(".searcher_block").value = query || "";

      // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏ –Ω–æ–≤–æ–º –ø–æ–∏—Å–∫–µ
      document.querySelector(".searcher").addEventListener("submit", function(e) {
        e.preventDefault();
        const input = document.querySelector(".searcher_block");
        const newQuery = input.value.trim();
        if (newQuery) {
          const encoded = encodeURIComponent(newQuery);
          window.location.href = `/searched/?query=${encoded}`;
        }
      });
    });
  </script>

</body>
</html>
