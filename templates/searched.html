{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>

  <div class="blur_overlay"></div>

  <div class="vertical-waves">
    <div class="wave"></div>
    <div class="wave"></div>
    <div class="wave"></div>
  </div>

  <!-- –ù–∞–∑–∞–¥ –∏ —Å—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞ -->
  <div class="search_block">
    <a href="{% url 'index' %}"><div class="back_button"></div></a>
    <form id="searchForm" class="searcher">
  <img class="search_icon" src="{% static 'images/search icon.png' %}">
  <input class="searcher_block" placeholder="–ü–æ–∏—Å–∫...">
</form>

  </div>

  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div class="choosed_genre"><span class="red">A </span>SEARCH:</div>

  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
  <div class="content_body" style="margin-top: 20px; font-size: 24px; text-align: center;">
    –¢—É—Ç –±—É–¥—É—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
  </div>

  <script>
    const query = new URLSearchParams(window.location.search).get("query");
    console.log("üîç –ü–µ—Ä–µ—Ö–æ–¥ —Å –∑–∞–ø—Ä–æ—Å–æ–º:", query);
    document.querySelector(".searcher_block").value = query || "";
  </script>


<script>
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–≤–µ–¥—ë–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –≤ input
  const query = new URLSearchParams(window.location.search).get("query");
  console.log("üîç –ü–µ—Ä–µ—Ö–æ–¥ —Å –∑–∞–ø—Ä–æ—Å–æ–º:", query);
  document.querySelector(".searcher_block").value = query || "";

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –ø–æ–∏—Å–∫–∞
  document.querySelector(".searcher").addEventListener("submit", function(e) {
    e.preventDefault();
    const input = document.querySelector(".searcher_block");
    const query = input.value.trim();
    if (query) {
      const encoded = encodeURIComponent(query);
      window.location.href = `/searched/?query=${encoded}`;
    }
  });
</script>



</body>
</html>
